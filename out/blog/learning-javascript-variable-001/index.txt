3:I[9275,[],""]
5:I[1343,[],""]
6:I[231,["231","static/chunks/231-0e9b5e6eeff08911.js","510","static/chunks/510-04f60a9cc6fcdcee.js","274","static/chunks/app/(base)/blog/%5Bslug%5D/page-d4631971737003d2.js"],""]
8:I[2276,["231","static/chunks/231-0e9b5e6eeff08911.js","656","static/chunks/656-127cdb7e764b08c0.js","605","static/chunks/app/(base)/layout-4c221aa36d107cb2.js"],"default"]
4:["slug","learning-javascript-variable-001","d"]
9:{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"}
a:{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"}
b:{"display":"inline-block"}
c:{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0}
0:["LjGvnnesFVyMmnHeudElT",[[["",{"children":["(base)",{"children":["blog",{"children":[["slug","learning-javascript-variable-001","d"],{"children":["__PAGE__?{\"slug\":\"learning-javascript-variable-001\"}",{}]}]}]},"$undefined","$undefined",true]}],["",{"children":["(base)",{"children":["blog",{"children":[["slug","learning-javascript-variable-001","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(base)","children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ec2d45d8bf845d71.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/1688e8608e7ef957.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/3547c22b45876d5b.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(base)","children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"ja","className":"undefined","children":["$","body",null,{"className":"_layout_body__Ry_X2 __className_1b1067","children":[["$","div",null,{"className":"Header_root__b6LHY","children":["$","div",null,{"className":"Header_inner__rSyT_","children":[["$","div",null,{"className":"Header_backhome___no63","children":["$","$L6",null,{"href":"/","className":"HomeIcon_root__e5ZgV","children":["$","div",null,{"className":"HomeIcon_inner__uIKo6"}]}]}],["$","div",null,{"className":"Header_navs__MOIHF","children":["$","div",null,{"className":"GlobalNav_root__MY4jM","children":[[["$","$L6","works",{"href":"/works/","className":"GlobalNav_nav__9q44_ GlobalNav_isUnactive__RSab7 __className_6bdb93","children":"Works."}],["$","$L6","blog",{"href":"/blog/","className":"GlobalNav_nav__9q44_  __className_6bdb93","children":"Blog."}],["$","$L6","about",{"href":"/about/","className":"GlobalNav_nav__9q44_ GlobalNav_isUnactive__RSab7 __className_6bdb93","children":"TalkMe!"}],false],"$L7"]}]}]]}]}],["$","div",null,{"className":"_layout_container__7wkYi","children":["$","$L8",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(base)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]}],["$","div",null,{"className":"Footer_root__F7X95","children":["$","small",null,{"className":"Footer_copyright__nD8jL __className_dc46c1","children":"PORTFOLIO SITE. | COPYRIGHT © TSUKASA TOMIOKA ALL RIGHTS RESERVED."}]}],["$","div",null,{"className":"_layout_globalBg__0AsUB"}]]}]}],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$9","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$a","children":"404"}],["$","div",null,{"style":"$b","children":["$","h2",null,{"style":"$c","children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/eaecd205a1d02809.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/a1b8f1c88bfe407d.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/6d9fc8420fac34dd.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","3",{"rel":"stylesheet","href":"/_next/static/css/dee53c710ab47b61.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","4",{"rel":"stylesheet","href":"/_next/static/css/0a8f3c37f99a38f0.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","5",{"rel":"stylesheet","href":"/_next/static/css/cb66cb7879a19bbb.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","6",{"rel":"stylesheet","href":"/_next/static/css/07781e541a2cd79a.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","7",{"rel":"stylesheet","href":"/_next/static/css/e942ac36b8c6ec6b.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","8",{"rel":"stylesheet","href":"/_next/static/css/f808a6ce21d0393d.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","9",{"rel":"stylesheet","href":"/_next/static/css/00ffdb3dc3fc6595.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","10",{"rel":"stylesheet","href":"/_next/static/css/dea7ae0698ffaba9.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","11",{"rel":"stylesheet","href":"/_next/static/css/ef465cddea94a006.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","12",{"rel":"stylesheet","href":"/_next/static/css/7ac57b20459908fc.css","precedence":"next","crossOrigin":"$undefined"}]]}],null],[null,[null,"$Ld"]]]]]
7:["$","$L6",null,{"href":"/uni-lab/","className":"SpecialButton_root__Qs3Da undefined","children":[["$","div",null,{"className":"SpecialButton_text__I6EFb __className_6bdb93","children":"Uni Lab."}],["$","div",null,{"className":"SpecialButton_arrow__Yh2h8","children":["$","svg",null,{"className":"SpecialButton_svg__wxCUL","width":"9","height":"15","viewBox":"0 0 9 15","xmlns":"http://www.w3.org/2000/svg","children":["$","path",null,{"d":"M9 7.50022L0.75 14.613L0.75 0.387458L9 7.50022Z","stroke":"$undefined","fill":"white","className":"$undefined"}]}]}]]}]
e:I[3432,["231","static/chunks/231-0e9b5e6eeff08911.js","510","static/chunks/510-04f60a9cc6fcdcee.js","274","static/chunks/app/(base)/blog/%5Bslug%5D/page-d4631971737003d2.js"],"default"]
f:T1548,<p>昔からある変数宣言方法であるvarですが、ECMAScript2015（ES6）から新たにlet, constが導入されてから、開発者の中でもvar宣言は非推奨とされるようになりました。</p>
<p>そもそも、let, constが追加された理由はvarの問題点を改善するため。JavaScriptやECMAScriptについて詳細に説明がされている <a href="https://jsprimer.net/basic/variables/#var-issues">JavaScript Primer</a> にもvarの問題点とES6でlet, constが追加された経緯が説明されています。</p>
<p>この学習記録では、varがなぜ非推奨か改めて整理しようと思います！</p>
<h2>【前提】JavaScriptの変数宣言の種類</h2>
<p>まず初めに、変数宣言のパターンとそれぞれの特徴を簡単にまとめます。</p>
<table>
<thead>
<tr>
<th>宣言方法</th>
<th>再宣言</th>
<th>再代入</th>
<th>スコープ</th>
<th>初期化</th>
</tr>
</thead>
<tbody>
<tr>
<td>var</td>
<td>●</td>
<td>●</td>
<td>関数</td>
<td>undefined</td>
</tr>
<tr>
<td>let</td>
<td>X</td>
<td>●</td>
<td>ブロック</td>
<td>X</td>
</tr>
<tr>
<td>const</td>
<td>X</td>
<td>X</td>
<td>ブロック</td>
<td>X</td>
</tr>
</tbody>
</table>
<p>それでは早速、varの問題点と非推奨な理由を下記に分けてまとめていきます！</p>
<ul>
<li>ホイスティング（変数の巻き上げ）時にundefinedで初期化される</li>
<li>関数スコープであることの問題</li>
<li>同じ変数名での再宣言が可能</li>
<li>グローバルスコープの変数を上書きできる</li>
</ul>
<h2>ホイスティング（変数の巻き上げ）時にundefinedで初期化される</h2>
<p>下記のようなコードを書いたときに、varとletではエラーの有無に違いが出てきます。</p>
<pre><code class="language-javascript">console.log(a);
console.log(b);
var a = 1;
let b = 1;

/* console.log(a)の結果
undefined
*/
/* console.log(b)の結果
Uncaught ReferenceError: Cannot access 'b' before initialization
*/
</code></pre>
<p>letの場合はホイスティングの際に、変数宣言文より前に変数を参照すると「初期化前に変数にアクセスしている」というReferenceErrorが出るようになっています。でもvarの場合は、<code>undefined</code>と表示されるだけでエラーになりません。</p>
<p>開発者は変数aは1を返すと考えて組んでいても、undefinedになっていることに気づかず、意図しない事態になりかねないので問題という訳です。</p>
<h2>関数スコープであることの問題</h2>
<p>これは書いて見たほうが分かりやすいので、letと比較して一度適当なコードを書いてみます。</p>
<pre><code class="language-javascript">function a () {
  if (true) {
    let b = 1;
    var c = 1;
  }
  console.log(b);
  // 結果：Uncaught ReferenceError: b is not defined
  console.log(c);
  // 結果：1
}
a();
</code></pre>
<p>letはブロックスコープなので、参照できる範囲は上記のソースならif文の中に限られます。でも、varは関数スコープなのでfunction a関数の範囲であればどこからでも参照できてしまいます。これがもし、if文と変数cを参照する記述の間に何百行も空いていたら流石に気づきづらく、これまた意図しない事態になる事があるので、非推奨な理由の一つです。</p>
<h2>同じ変数名での再宣言が可能</h2>
<p>varは下記のように同じ名前での再宣言を許してしまいます。</p>
<pre><code class="language-javascript">var a = 1;
var a = 1;
</code></pre>
<p>letであれば下記のようなエラーを出してくれます。</p>
<pre><code class="language-javascript">let a = 1;
let a = 1;
// 結果：Uncaught SyntaxError: Identifier 'a' has already been declared
</code></pre>
<p>既に同じ名前で宣言されていることに気づかず、再宣言して上書きする可能性があって問題ですが、さらにグローバルオブジェクト（ブラウザ上でのwindow）と合わせて考えるとより一層問題となります。下記の見出しで書いていきますね。</p>
<h2>グローバルスコープの変数を上書きできる</h2>
<p>まず前提として、関数宣言された関数やvar宣言された変数は、グローバルオブジェクト（ブラウザ上ではwindow）に値が格納されます。</p>
<pre><code class="language-javascript">var a = 1;
function b () { console.log('hello') }
console.log(window.a);
// 結果：1
window.b();
// 結果：hello
</code></pre>
<p>前の問題点で書いた通り、var宣言は再宣言が可能です。なので、下記みたいな事ができてしまいます。</p>
<pre><code class="language-javascript">innerWidth = 10;
console.log(window.innerWidth);
// 結果：10
</code></pre>
<p>innerWidthは画面の横幅を取得できる元々windowに組み込まれている変数ですが、その変数を再宣言して上書きできてしまいます。当然開発者の知らないwindowプロパティもあるはずで、知らずに独自の変数として宣言して、windowのプロパティと競合してしまう事態になりかねません。このような意図しない結果を生む可能性があるのでvar宣言は問題ありです。</p>
2:[["$","div",null,{"className":"ArticleHead_root__L1n1V","children":[["$","div",null,{"className":"ArticleHead_thumbnail__1lpX1","children":["$","div",null,{"className":"EmojiIcon_root__S4m4O","children":"🧩"}]}],["$","h1",null,{"className":"ArticleHead_head__IBrwC [object Object]","children":"JavaScript学習:変数編｜varはなぜ非推奨？let, constとの違い（なんとなく理解禁止シリーズ）"}],["$","div",null,{"className":"ArticleHead_info__ux4SN","children":[["$","div",null,{"className":"$undefined","children":["$","div",null,{"className":"UpdateDate_root__DTa6J","children":[["$","div",null,{"className":"UpdateDate_icon__5bcpN","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 512 512","children":[["$","path",null,{"fill":"white","stroke":"$undefined","d":"M403.925,108.102c-27.595-27.595-62.899-47.558-102.459-56.29L304.182,0L201.946,53.867l-27.306,14.454 l-5.066,2.654l8.076,4.331l38.16,20.542l81.029,43.602l2.277-42.859c28.265,7.546,53.438,22.53,73.623,42.638 c29.94,29.939,48.358,71.119,48.358,116.776c0,23.407-4.843,45.58-13.575,65.687l40.37,17.532 c11.076-25.463,17.242-53.637,17.242-83.219C465.212,198.306,441.727,145.904,403.925,108.102z"}],["$","path",null,{"fill":"white","stroke":"$undefined","d":"M296.256,416.151l-81.101-43.612l-2.272,42.869c-28.26-7.555-53.51-22.53-73.618-42.636 c-29.945-29.95-48.364-71.12-48.364-116.767c0-23.427,4.844-45.522,13.576-65.697l-40.37-17.531 c-11.076,25.53-17.242,53.723-17.242,83.228c0,57.679,23.407,110.157,61.21,147.893c27.595,27.594,62.899,47.548,102.453,56.202 l-2.716,51.9l102.169-53.878l27.455-14.454l4.988-2.643l-7.999-4.332L296.256,416.151z"}]]}]}],["$","span",null,{"className":"UpdateDate_text__qw_77","children":"2024年08月18日"}]]}]}],["$","div",null,{"className":"$undefined","children":["$","ul",null,{"className":"Categorys_root__pGks1","children":[["$","div",null,{"className":"Category_root__QLnRI","children":"JavaScript学習記録｜なんとなく理解禁止シリーズ"}]]}]}]]}]]}],["$","div",null,{"className":"_slug__contents__tliD3","children":["$","div",null,{"className":"BlogTemplate_root__1v2_7","children":[["$","main",null,{"className":"_slug__main__Lje2N","children":["$","div",null,{"className":"BlogTemplate_main__lG7yD","children":["$","$Le",null,{"children":"$f"}]}]}],["$","nav",null,{"className":"BlogTemplate_nav__4DMiI","children":"$L10"}]]}]}]]
d:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"JavaScript学習:変数編｜varはなぜ非推奨？let, constとの違い（なんとなく理解禁止シリーズ）"}],["$","meta","3",{"name":"description","content":"投稿詳細ページです"}],["$","meta","4",{"name":"robots","content":"noindex, nofollow"}],["$","link","5",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","meta","6",{"name":"next-size-adjust"}]]
1:null
10:["$","div",null,{"className":"BlogSidebar_root__uw15U","children":[["$","div",null,{"className":"BlogSidebar_pickup__vOFcW","children":[["$","h3",null,{"className":"Heading_root__8C_HZ Heading_border__cET98 Heading_small__z92ds __className_6bdb93","children":"Pickup Contents."}],["$","div",null,{"className":"PickupArticles_rootInline__zSCZ9","children":[["$","$L6","learning-react-how-work-001",{"href":"/blog/learning-react-how-work-001","children":"React学習:仕組み編｜JSXがレンダリングされるまで〜最小限の構成で仕組み理解（なんとなく理解禁止シリーズ）"}],false,false,false]}]]}],["$","div",null,{"className":"BlogSidebar_categorys__HAy9v","children":[["$","h3",null,{"className":"Heading_root__8C_HZ Heading_border__cET98 Heading_small__z92ds __className_6bdb93","children":"Categorys."}],"$L11"]}]]}]
11:["$","ul",null,{"className":"CategoryLinks_root__f8qHI","children":[["$","li","learning-react",{"className":"$undefined","children":["$","$L6",null,{"href":"/blog/blog-category/learning-react","children":"React学習記録｜なんとなく理解禁止シリーズ"}]}],["$","li","learning-javascript",{"className":"$undefined","children":["$","$L6",null,{"href":"/blog/blog-category/learning-javascript","children":"JavaScript学習記録｜なんとなく理解禁止シリーズ"}]}]]}]
